#!/bin/bash
set -euo pipefail

NAS_USER="maneesh"
NAS_HOST="pinas"
RCLONE_REMOTE="aws-backups:gargantua-bucket"

FOLDERS=(
  "/gargantua/Media"
  "/gargantua/Documents"
  "/gargantua/screenshots"
)

for folder in "${FOLDERS[@]}"; do
  folder_name=$(basename "$folder")

  echo "üîÅ Syncing ${folder} ‚Üí ${RCLONE_REMOTE}/${folder_name}/"

  ssh "${NAS_USER}@${NAS_HOST}" \
    "rclone sync '${folder}' '${RCLONE_REMOTE}/${folder_name}/' \
     --s3-storage-class INTELLIGENT_TIERING \
     --transfers=4 \
     --checkers=8 \
     --delete-after"
done

echo "‚úÖ All folders synced successfully!"
